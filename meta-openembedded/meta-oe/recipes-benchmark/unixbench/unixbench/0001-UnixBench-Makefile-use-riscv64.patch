From 1f83485d5402ca7ef07919182dd3ae3589c41265 Mon Sep 17 00:00:00 2001
From: "hanyu.cp" <hanyu.cp@alibaba-inc.com>
Date: Thu, 27 Apr 2023 17:36:56 +0800
Subject: [PATCH] UnixBench/Makefile:use riscv64

Signed-off-by: hanyu.cp <hanyu.cp@alibaba-inc.com>
---
 UnixBench/Makefile | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/UnixBench/Makefile b/UnixBench/Makefile
index 4874d1f..1ff1bed 100644
--- a/UnixBench/Makefile
+++ b/UnixBench/Makefile
@@ -55,7 +55,7 @@ GL_LIBS = -lGL -lXext -lX11
 # COMPILER CONFIGURATION: Set "CC" to the name of the compiler to use
 # to build the binary benchmarks.  You should also set "$cCompiler" in the
 # Run script to the name of the compiler you want to test.
-CC=gcc
+CC=riscv64-linux-gcc
 
 # OPTIMISATION SETTINGS:
 # Use gcc option if defined UB_GCC_OPTIONS via "Environment variable" or "Command-line arguments".
@@ -89,7 +89,7 @@ else
 
   ## OS detection.  Comment out if gmake syntax not supported by other 'make'. 
   OSNAME:=$(shell uname -s)
-  ARCH := $(shell uname -m)
+  ARCH := riscv64#$(shell uname -m)
   ifeq ($(OSNAME),Linux)
     # Not all CPU architectures support "-march" or "-march=native".
     #   - Supported    : x86, x86_64, ARM, AARCH64, riscv64, etc..
@@ -97,7 +97,7 @@ else
     ifeq ($(ARCH),$(filter $(ARCH),ppc64 ppc64le))
         OPTON += -mcpu=native -mtune=native
     else ifeq ($(ARCH),riscv64)
-        OPTON += -march=rv64g -mabi=lp64d
+        #OPTON += -march=rv64g -mabi=lp64d
     else
         OPTON += -march=native -mtune=native
     endif
-- 
2.17.1

