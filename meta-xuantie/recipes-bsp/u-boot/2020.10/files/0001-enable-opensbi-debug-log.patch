From feb7329baf14beec3e6c2774fe1fbd158ee96005 Mon Sep 17 00:00:00 2001
From: "yangtianyu.lu" <luyangtianyu.lyty@alibaba-inc.com>
Date: Tue, 8 Oct 2024 06:15:18 +0000
Subject: [PATCH] enable opensbi debug log

---
 common/spl/spl_opensbi.c | 2 +-
 include/opensbi.h        | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/common/spl/spl_opensbi.c b/common/spl/spl_opensbi.c
index 14f335f75f..971ca3d008 100644
--- a/common/spl/spl_opensbi.c
+++ b/common/spl/spl_opensbi.c
@@ -72,7 +72,7 @@ void spl_invoke_opensbi(struct spl_image_info *spl_image)
 	opensbi_info.version = FW_DYNAMIC_INFO_VERSION;
 	opensbi_info.next_addr = uboot_entry;
 	opensbi_info.next_mode = FW_DYNAMIC_INFO_NEXT_MODE_S;
-	opensbi_info.options = SBI_SCRATCH_NO_BOOT_PRINTS;
+	opensbi_info.options = SBI_SCRATCH_DEBUG_PRINTS;
 	opensbi_info.boot_hart = gd->arch.boot_hart;
 
 	opensbi_entry = (void (*)(ulong, ulong, ulong))spl_image->entry_point;
diff --git a/include/opensbi.h b/include/opensbi.h
index d812cc8ccd..6af38005c3 100644
--- a/include/opensbi.h
+++ b/include/opensbi.h
@@ -21,6 +21,8 @@
 enum sbi_scratch_options {
 	/** Disable prints during boot */
 	SBI_SCRATCH_NO_BOOT_PRINTS = (1 << 0),
+	/** Enable runtime debug prints */
+	SBI_SCRATCH_DEBUG_PRINTS = (1 << 1),
 };
 
 /** Representation dynamic info passed by previous booting stage */
-- 
2.25.1

