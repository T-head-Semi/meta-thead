From 4baac2d4bf6e77d159755d75481f9bd8dd6ce8ac Mon Sep 17 00:00:00 2001
From: "yangtianyu.lu" <luyangtianyu.lyty@alibaba-inc.com>
Date: Mon, 7 Oct 2024 06:07:40 +0000
Subject: [PATCH] Add compile flags "-misa-spec=2.2"

---
 arch/riscv/cpu/Makefile | 3 +++
 arch/riscv/lib/Makefile | 1 +
 2 files changed, 4 insertions(+)

diff --git a/arch/riscv/cpu/Makefile b/arch/riscv/cpu/Makefile
index 6bf6f911c6..86c667a295 100644
--- a/arch/riscv/cpu/Makefile
+++ b/arch/riscv/cpu/Makefile
@@ -2,6 +2,9 @@
 #
 # Copyright (C) 2018, Bin Meng <bmeng.cn@gmail.com>
 
+ccflags-y += -misa-spec=2.2
+asflags-y += -misa-spec=2.2
+
 extra-y = start.o
 
 obj-y += cpu.o mtrap.o
diff --git a/arch/riscv/lib/Makefile b/arch/riscv/lib/Makefile
index 6c503ff2b2..7734f51bcc 100644
--- a/arch/riscv/lib/Makefile
+++ b/arch/riscv/lib/Makefile
@@ -6,6 +6,7 @@
 # Copyright (C) 2017 Andes Technology Corporation
 # Rick Chen, Andes Technology Corporation <rick@andestech.com>
 
+ccflags-y += -misa-spec=2.2
 obj-$(CONFIG_CMD_BOOTM) += bootm.o
 obj-$(CONFIG_CMD_BOOTI) += bootm.o image.o
 obj-$(CONFIG_CMD_GO) += boot.o
-- 
2.25.1

